name: 'LINE Notify Action'
description: '利用LINE Notify進行CI結果通知'

inputs:
  token:
    description: 'LINE Notify Token'
      required: true
      default: ''
runs:
  using: "composite"
  steps:
    - name: CI結果通知
      env:
        BUILD_LINK: ${{ gitea.server_url }}/${{ gitea.repository }}/actions/runs/${{ gitea.run_number }}
      if: ${{ !cancelled() }}
      run: |
        [[ ${{ job.status }} = "success" ]] && MSG=${{ vars.SUCCESS_MSG }} || MSG=${{ vars.FAILURE_MSG }}
        curl -d "message=${BUILD_LINK}%0A${MSG}" -H "Authorization: Bearer ${{ inputs.token }}" -X POST https://notify-api.line.me/api/notify
